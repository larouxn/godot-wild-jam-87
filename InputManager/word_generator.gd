class_name WordGenerator

const SYLLABLE_ARRAY: Array = [
	"ing",
	"er",
	"a",
	"ly",
	"ed",
	"i",
	"es",
	"re",
	"tion",
	"in",
	"e",
	"con",
	"y",
	"ter",
	"ex",
	"al",
	"de",
	"com",
	"o",
	"di",
	"en",
	"an",
	"ty",
	"ry",
	"u",
	"ti",
	"ri",
	"be",
	"per",
	"to",
	"pro",
	"ac",
	"ad",
	"ar",
	"ers",
	"ment",
	"or",
	"tions",
	"ble",
	"der",
	"ma",
	"na",
	"si",
	"un",
	"at",
	"dis",
	"ca",
	"cal",
	"man",
	"ap",
	"po",
	"sion",
	"vi",
	"el",
	"est",
	"la",
	"lar",
	"pa",
	"ture",
	"for",
	"is",
	"mer",
	"pe",
	"ra",
	"so",
	"ta",
	"as",
	"col",
	"fi",
	"ful",
	"ger",
	"low",
	"ni",
	"par",
	"son",
	"tle",
	"day",
	"ny",
	"pen",
	"pre",
	"tive",
	"car",
	"ci",
	"mo",
	"on",
	"ous",
	"pi",
	"se",
	"ten",
	"tor",
	"ver",
	"ber",
	"can",
	"dy",
	"et",
	"it",
	"mu",
	"no",
	"ple",
	"cu",
	"fac",
	"fer",
	"gen",
	"ic",
	"land",
	"light",
	"ob",
	"of",
	"pos",
	"tain",
	"den",
	"ings",
	"mag",
	"ments",
	"set",
	"some",
	"sub",
	"sur",
	"ters",
	"tu",
	"af",
	"au",
	"cy",
	"fa",
	"im",
	"li",
	"lo",
	"men",
	"min",
	"mon",
	"op",
	"out",
	"rec",
	"ro",
	"sen",
	"side",
	"tal",
	"tic",
	"ties",
	"ward",
	"age",
	"ba",
	"but",
	"cit",
	"cle",
	"co",
	"cov",
	"da",
	"dif",
	"ence",
	"ern",
	"eve",
	"hap",
	"ies",
	"ket",
	"lec",
	"main",
	"mar",
	"mis",
	"my",
	"nal",
	"ness",
	"ning",
	"n't",
	"nu",
	"oc",
	"pres",
	"sup",
	"te",
	"ted",
	"tem",
	"tin",
	"tri",
	"tro",
	"up",
	"va",
	"ven",
	"vis",
	"am",
	"bor",
	"by",
	"cat",
	"cent",
	"ev",
	"gan",
	"gle",
	"head",
	"high",
	"il",
	"lu",
	"me",
	"nore",
	"part",
	"por",
	"read",
	"rep",
	"su",
	"tend",
	"ther",
	"ton",
	"try",
	"um",
	"uer",
	"way",
	"ate",
	"bet",
	"bles",
	"bod",
	"cap",
	"cial",
	"cir",
	"cor",
	"coun",
	"cus",
	"dan",
	"dle",
	"ef",
	"end",
	"ent",
	"ered",
	"fin",
	"form",
	"go",
	"har",
	"ish",
	"lands",
	"let",
	"long",
	"mat",
	"meas",
	"mem",
	"mul",
	"ner",
	"play",
	"ples",
	"ply",
	"port",
	"press",
	"sat",
	"sec",
	"ser",
	"south",
	"sun",
	"the",
	"ting",
	"tra",
	"tures",
	"val",
	"var",
	"vid",
	"wil",
	"win",
	"won",
	"work",
	"act",
	"ag",
	"air",
	"als",
	"bat",
	"bi",
	"cate",
	"cen",
	"char",
	"come",
	"cul",
	"ders",
	"east",
	"fect",
	"fish",
	"fix",
	"gi",
	"grand",
	"great",
	"heav",
	"ho",
	"hunt",
	"ion",
	"its",
	"jo",
	"lat",
	"lead",
	"lect",
	"lent",
	"less",
	"lin",
	"mal",
	"mi",
	"mil",
	"moth",
	"near",
	"nel",
	"net",
	"new",
	"one",
	"point",
	"prac",
	"ral",
	"rect",
	"ried",
	"round",
	"row",
	"sa",
	"sand",
	"self",
	"sent",
	"ship",
	"sim",
	"sions",
	"sis",
	"sons",
	"stand",
	"sug",
	"tel",
	"tom",
	"tors",
	"tract",
	"tray",
	"us",
	"vel",
	"west",
	"where",
	"writ"
]
const SYLLABLE_WEIGHTS: Array = [
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	11,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	10,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	9,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	8,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	7,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	6,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	5,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	4,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	3,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	2,
	1,
	1,
	1,
	1,
	1,
	1,
	1,
	1,
	1,
	1,
	1,
	1,
	1,
	1,
	1,
	1
]
const MAX_SYLLABLES: int = 3
const PUNCTUATION_ARRAY: Array = ["_", "--", ", ", "; ", "'", "-"]
const MAX_SENTENCE_LENGTH: int = 10  # must be greater than 3
const CHANCE_OF_RANDOM_PUNCTUATION: float = 0.25  # perecentage value 0.0 - 1.0
var random: RandomNumberGenerator = RandomNumberGenerator.new()


func _get_syllable() -> String:
	return SYLLABLE_ARRAY[random.rand_weighted(SYLLABLE_WEIGHTS)]


func _get_word() -> String:
	var num_syllables: int = (random.randi() % MAX_SYLLABLES + 1) + 1
	var word: String = ""
	for syllable in range(num_syllables):
		var next_syllable: String = _get_syllable()
		word += next_syllable
	return word


func _get_punctuation() -> String:
	return PUNCTUATION_ARRAY.pick_random()


func get_sentence_array(num_words: int) -> Array:
	var sentence: Array = []
	for word_index in range(num_words):
		var next_word: String = _get_word()

		# start of sentence always capitialize + space
		if word_index == 0:
			next_word = next_word.capitalize()
			sentence.append(next_word)
			sentence.append(" ")
			continue
		# end of sentence always gets end of sentence punctuation
		elif word_index == (num_words - 1):
			sentence.append(next_word)
			sentence.append([".", "!", "?"].pick_random())
			continue
		sentence.append(next_word)
		var add_random_punctuation: bool = randf() > (1 - CHANCE_OF_RANDOM_PUNCTUATION)
		if add_random_punctuation:
			sentence.append(_get_punctuation())
		else:
			sentence.append(" ")
	return sentence


#func get_paragraph_array(num_sentences: int) -> String:
#var paragraph : String = ""
#for sentence_index in range(num_sentences):
#var sentence_length: int = randi_range(3, MAX_SENTENCE_LENGTH)
#return paragraph


func join_token_array_to_string(token_array: Array) -> String:
	return "".join(token_array)
